- id: Start_Up_Home_Assistant
  alias: Start Up Home Assistant
  trigger:
  - platform: homeassistant
    event: start
  action:
  - service: script.turn_on
    entity_id: script.start_up_home_assistant
- id: Update Last Motion
  alias: Update Last Motion
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.bureau_motion
    - binary_sensor.speelkamer_motion
    - binary_sensor.motion_achterdeur
    - binary_sensor.oprit_camera
    - binary_sensor.voor_deur
    - binary_sensor.achter_deur
    - binary_sensor.keuken_deur
    - binary_sensor.garage_deur
    - binary_sensor.motion_wc_boven
    - binary_sensor.motion_wc_beneden
    - binary_sensor.motion_gang_eerste_2
    - binary_sensor.motion_gang_eerste_1
    - binary_sensor.motion_inkom_1
    - binary_sensor.motion_inkom_2
    - binary_sensor.motion_gang_zolder
    - binary_sensor.motion_voordeur
    - binary_sensor.motion_bureau
    - binary_sensor.motion_dressing
    - binary_sensor.motion_speelkamer
    - binary_sensor.motion_living
    to: 'on'
  action:
  - service: variable.set_variable
    data:
      variable: last_motion
      attributes_template: "{\n      \"history_1\": \"{{ trigger.to_state.attributes.friendly_name|replace('motion\
        \ sensor','') }}\",\n      \"history_2\": \"{{ states.variable.last_motion.attributes.history_1\
        \ }}\",\n      \"history_3\": \"{{ states.variable.last_motion.attributes.history_2\
        \ }}\",\n      \"history_4\": \"{{ states.variable.last_motion.attributes.history_3\
        \ }}\",\n      \"history_5\": \"{{ states.variable.last_motion.attributes.history_4\
        \ }}\",\n      \"history_6\": \"{{ states.variable.last_motion.attributes.history_5\
        \ }}\",\n      \"history_7\": \"{{ states.variable.last_motion.attributes.history_6\
        \ }}\",\n      \"history_8\": \"{{ states.variable.last_motion.attributes.history_7\
        \ }}\",\n      \"history_9\": \"{{ states.variable.last_motion.attributes.history_8\
        \ }}\",\n      \"history_10\": \"{{ states.variable.last_motion.attributes.history_9\
        \ }}\"\n}\n"
    data_template:
      value: '{{ trigger.to_state.attributes.friendly_name|replace(''motion sensor'','''')
        }}: {{as_timestamp(states.variable.last_motion.last_changed)| timestamp_custom(''%X'')
        }}        '
  initial_state: true
  mode: single
- id: '1575277594428'
  alias: Set night profile for oprit camera
  description: ''
  trigger:
  - event: sunset
    platform: sun
  condition: []
  action:
  - service: shell_command.set_oprit_profile_night
- id: '1575277627609'
  alias: Set day profile for oprit camera
  description: ''
  trigger:
  - event: sunrise
    platform: sun
  condition: []
  action:
  - service: shell_command.set_oprit_profile_day
- id: '1578590308661'
  alias: NachtTafel Licht Febe Aan
  description: ''
  trigger:
  - device_id: aecf8a3bd0144f6f9fbbedf7e7c503dc
    domain: deconz
    platform: device
    subtype: turn_on
    type: remote_button_short_press
  condition:
  - condition: device
    device_id: 9d61839836424735bb9de4c9ad91230a
    domain: light
    entity_id: light.nachttafel_febe
    type: is_off
  action:
  - entity_id: scene.default_nachttafel_febe
    service: scene.turn_on
- id: NachtTafel Licht Febe Uit
  alias: NachtTafel Licht Febe Uit
  description: ''
  trigger:
  - device_id: aecf8a3bd0144f6f9fbbedf7e7c503dc
    domain: deconz
    platform: device
    subtype: turn_on
    type: remote_button_short_press
  condition:
  - condition: device
    device_id: 9d61839836424735bb9de4c9ad91230a
    domain: light
    entity_id: light.nachttafel_febe
    type: is_on
  action:
  - entity_id: light.febe_leds
    service: light.turn_off
  mode: single
- id: '1578590350074'
  alias: NachtTafel Licht Margot Aan
  description: ''
  trigger:
  - device_id: ed641ace598140ab84eff39005e4e6d0
    domain: deconz
    platform: device
    subtype: turn_on
    type: remote_button_short_press
  condition:
  - condition: device
    device_id: 5a5791e30bae435f93fc82b4bbb5dfb8
    domain: light
    entity_id: light.nachttafel_margot
    type: is_off
  action:
  - entity_id: scene.default_nachttafel_margot
    service: scene.turn_on
- id: '1586931483975'
  alias: Send Notification Afval Collection
  description: ''
  trigger:
  - at: '18:00:00'
    platform: time
  condition:
    condition: or
    conditions:
    - condition: state
      entity_id: sensor.recycleapp_morgen
      state: papier, pmd
    - condition: state
      entity_id: sensor.recycleapp_morgen
      state: restafval
    - condition: state
      entity_id: sensor.recycleapp_morgen
      state: groenafval
  action:
  - data: {}
    service: script.notify_afval
- id: '1587360682923'
  alias: Alarm Clock Philippe
  description: https://flemmingss.com/wake-up-light-based-on-android-alarm-with-home-assistant-and-tasker/
  trigger:
  - platform: template
    value_template: '{% set alarm_time = as_timestamp(states(''input_datetime.philippe_phone_next_alarm''))
      %}

      {% set time_now = as_timestamp(states(''sensor.date_time'').replace('','',''''))
      %}

      {{ time_now >= ( alarm_time - 300) }}'
  condition:
  - condition: state
    entity_id: input_boolean.philippe_phone_alarm_set
    state: 'on'
  - condition: state
    entity_id: person.philippe
    state: home
  action:
  - service: script.sunrise_wled
    data:
      wled_id: light.led_slaapkamer
      time: 5
  mode: single
- id: Sync Tasmota states
  alias: Sync Tasmota states
  trigger:
  - event: start
    platform: homeassistant
  action:
  - data:
      payload: ''
      topic: cmnd/tasmotas/state
    service: mqtt.publish
  - data:
      payload: ''
      topic: cmnd/tasmotas/shutterposition
    service: mqtt.publish
  - data:
      payload: ''
      topic: tasmotas/cmnd/state
    service: mqtt.publish
  - data:
      payload: 0
      topic: cmnd/tasmotas/status
    service: mqtt.publish
  initial_state: true
- id: '1587624008968'
  alias: Switch Febe Shaken
  description: ''
  trigger:
  - device_id: aecf8a3bd0144f6f9fbbedf7e7c503dc
    domain: deconz
    platform: device
    subtype: ''
    type: remote_gyro_activated
  condition: []
  action:
  - data_template:
      effect: '{{ state_attr("light.nachttafel_febe", "effect_list") | random }}'
      entity_id: light.nachttafel_febe
      rgb_color:
      - '{{ (range(0, 255)|random) }}'
      - '{{ (range(0, 255)|random) }}'
      - '{{ (range(0, 255)|random) }}'
      transition: '{{ (range(1, 3)|random) }}'
    entity_id: light.febe_leds
    service: light.turn_on
  mode: single
- id: '1587626119060'
  alias: NachtTafel Licht Margot Uit
  description: ''
  trigger:
  - device_id: ed641ace598140ab84eff39005e4e6d0
    domain: deconz
    platform: device
    subtype: turn_on
    type: remote_button_short_press
  condition:
  - condition: device
    device_id: 5a5791e30bae435f93fc82b4bbb5dfb8
    domain: light
    entity_id: light.nachttafel_margot
    type: is_on
  action:
  - data: {}
    entity_id: light.nachttafel_margot
    service: light.turn_off
- id: '1587626206992'
  alias: Switch Margot Shaken
  description: ''
  trigger:
  - device_id: ed641ace598140ab84eff39005e4e6d0
    domain: deconz
    platform: device
    subtype: ''
    type: remote_gyro_activated
  condition: []
  action:
  - data_template:
      effect: '{{ state_attr("light.nachttafel_margot", "effect_list") | random }}'
      rgb_color:
      - '{{ (range(0, 255)|random) }}'
      - '{{ (range(0, 255)|random) }}'
      - '{{ (range(0, 255)|random) }}'
      transition: '{{ (range(1, 3)|random) }}'
    entity_id: light.nachttafel_margot
    service: light.turn_on
- id: Alarm Clock Febe
  alias: Alarm Clock Febe
  trigger:
  - platform: template
    value_template: "{{ states('sensor.time') == \n    (state_attr('input_datetime.febe_next_alarm',\
      \ 'timestamp') - 300)\n         |timestamp_custom('%H:%M', false) }}"
  condition:
  - condition: state
    entity_id: input_boolean.febe_alarm_set
    state: 'on'
  action:
  - service: script.sunrise_wled
    data:
      wled_id: light.febe_led_bed
      time: 5
  - data: {}
    entity_id: input_boolean.febe_alarm_set
    service: input_boolean.turn_off
  mode: single
- id: Alarm Clock Margot
  alias: Alarm Clock Margot
  trigger:
  - platform: template
    value_template: "{{ states('sensor.time') == \n    (state_attr('input_datetime.margot_next_alarm',\
      \ 'timestamp') - 300)\n         |timestamp_custom('%H:%M', false) }}"
  condition:
  - condition: state
    entity_id: input_boolean.margot_alarm_set
    state: 'on'
  action:
  - data:
      wled_id: light.nachttafel_margot
      time: 5
    service: script.sunrise_wled
  - data: {}
    entity_id: input_boolean.margot_alarm_set
    service: input_boolean.turn_off
  mode: single
- id: '1588246366774'
  alias: Aandacht Planten
  description: Planten die laag gehalte van water of meststof hebben
  trigger:
  - at: '18:30:00'
    platform: time
  condition:
  - condition: or
    conditions:
    - below: '25'
      condition: numeric_state
      entity_id: sensor.greenhouse_zone_1_moisture
    - below: '100'
      condition: numeric_state
      entity_id: sensor.greenhouse_zone_1_soil_conductivity
    - below: '25'
      condition: numeric_state
      entity_id: sensor.greenhouse_zone_2_moisture
    - below: '100'
      condition: numeric_state
      entity_id: sensor.greenhouse_zone_2_soil_conductivity
    - below: '25'
      condition: numeric_state
      entity_id: sensor.greenhouse_zone_3_moisture
    - below: '100'
      condition: numeric_state
      entity_id: sensor.greenhouse_zone_3_soil_conductivity
    - below: '25'
      condition: numeric_state
      entity_id: sensor.greenhouse_zone_4_moisture
    - below: '100'
      condition: numeric_state
      entity_id: sensor.greenhouse_zone_4_soil_conductivity
    - below: '25'
      condition: numeric_state
      entity_id: sensor.moestuin_moisture
    - below: '100'
      condition: numeric_state
      entity_id: sensor.moestuin_soil_conductivity
    - below: '25'
      condition: numeric_state
      entity_id: sensor.rozemarijn_moisture
    - below: '100'
      condition: numeric_state
      entity_id: sensor.rozemarijn_soil_conductivity
    - below: '25'
      condition: numeric_state
      entity_id: sensor.bloempot_voordeur_moisture
    - below: '100'
      condition: numeric_state
      entity_id: sensor.bloempot_voordeur_soil_conductivity
    - below: '25'
      condition: numeric_state
      entity_id: sensor.olijfboom_moisture
    - below: '100'
      condition: numeric_state
      entity_id: sensor.olijfboom_soil_conductivity
  action:
  - data_template:
      message: "Deze planten vragen vandaag je aandacht: {%if states('sensor.greenhouse_zone_1_moisture')\
        \ | int < 20 %}\n  - Serre Zone 1 heeft water nodig, {{ states('sensor.greenhouse_zone_1_moisture')\
        \ }} %\n{%- endif %} {%- if states('sensor.greenhouse_zone_1_soil_conductivity')\
        \ | int < 100 %}\n  - Serre Zone 1 heeft meststof nodig, {{ states('sensor.greenhouse_zone_1_soil_conductivity')\
        \ }} µS/cm\n{%- endif %} {%- if states('sensor.greenhouse_zone_2_moisture')\
        \ | int < 20 %}\n  - Serre Zone 2 heeft water nodig, {{ states('sensor.greenhouse_zone_2_moisture')\
        \ }} %\n{%- endif %} {%- if states('sensor.greenhouse_zone_2_soil_conductivity')\
        \ | int < 100 %}\n  - Serre Zone 2 heeft meststof nodig, {{ states('sensor.greenhouse_zone_2_soil_conductivity')\
        \ }} µS/cm\n{%- endif %} {%- if states('sensor.greenhouse_zone_3_moisture')\
        \ | int < 20 %}\n  - Serre Zone 3 heeft water nodig, {{ states('sensor.greenhouse_zone_3_moisture')\
        \ }} %\n{%- endif %} {%- if states('sensor.greenhouse_zone_3_soil_conductivity')\
        \ | int < 100 %}\n  - Serre Zone 3 heeft meststof nodig, {{ states('sensor.greenhouse_zone_3_soil_conductivity')\
        \ }} µS/cm\n{%- endif %} {%- if states('sensor.greenhouse_zone_4_moisture')\
        \ | int < 20 %}\n  - Serre Zone 4 heeft water nodig, {{ states('sensor.greenhouse_zone_4_moisture')\
        \ }} %\n{%- endif %} {%- if states('sensor.greenhouse_zone_4_soil_conductivity')\
        \ | int < 100 %}\n  - Serre Zone 4 heeft meststof nodig, {{ states('sensor.greenhouse_zone_4_soil_conductivity')\
        \ }} µS/cm\n{%- endif %} {%- if states('sensor.moestuin_moisture') | int <\
        \ 25 %}\n  - Moestuin heeft water nodig, {{ states('sensor.moestuin_moisture')\
        \ }} %\n{%- endif %} {%- if states('sensor.moestuin_soil_conductivity') |\
        \ int < 100 %}\n  - Moestuin heeft meststof nodig, {{ states('sensor.moestuin_soil_conductivity')\
        \ }} µS/cm\n{%- endif %} {%- if states('sensor.rozemarijn_moisture') | int\
        \ < 20 %}\n  - Rozemarijn heeft water nodig, {{ states('sensor.rozemarijn_moisture')\
        \ }} %\n{%- endif %} {%- if states('sensor.rozemarijn_soil_conductivity')\
        \ | int < 100 %}\n  - Rozemarijn heeft meststof nodig, {{ states('sensor.rozemarijn_soil_conductivity')\
        \ }} µS/cm\n{%- endif %} {%- if states('sensor.bloempot_voordeur_moisture')\
        \ | int < 20 %}\n  - Bloempot voordeur heeft water nodig, {{ states('sensor.bloempot_voordeur_moisture')\
        \ }} %\n{%- endif %} {%- if states('sensor.bloempot_voordeur_soil_conductivity')\
        \ | int < 100 %}\n  - Bloempot voordeur heeft meststof nodig, {{ states('sensor.bloempot_voordeur_soil_conductivity')\
        \ }} µS/cm\n{%- endif %} {%- if states('sensor.olijfboom_moisture') | int\
        \ < 20 %}\n  - Olijfboom voordeur heeft water nodig, {{ states('sensor.olijfboom_moisture')\
        \ }} %\n{%- endif %} {%- if states('sensor.olijfboom_soil_conductivity') |\
        \ int < 100 %}\n  - Olijfboom voordeur heeft meststof nodig, {{ states('sensor.olijfboom_soil_conductivity')\
        \ }} µS/cm\n{%- endif %}"
    service: notify.hazilverberkenstraatbot
- id: '1588439093079'
  alias: Enable Alarm Margot
  description: ''
  trigger:
  - at: '18:00:00'
    platform: time
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.margot_alarm_set
    service: input_boolean.turn_on
  - choose:
    - conditions:
      - condition: time
        weekday:
        - sun
        - mon
        - tue
        - wed
        - thu
      sequence:
      - service: input_datetime.set_datetime
        data:
          time: 07:15:00
        entity_id: input_datetime.margot_next_alarm
    - conditions:
      - condition: time
        weekday:
        - fri
        - sat
      sequence:
      - service: input_datetime.set_datetime
        data:
          time: 08:00:00
        entity_id: input_datetime.margot_next_alarm
    default: []
- id: '1588439142845'
  alias: Enable Alarm Febe
  description: ''
  trigger:
  - at: '18:00:00'
    platform: time
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.febe_alarm_set
    service: input_boolean.turn_on
  - choose:
    - conditions:
      - condition: time
        weekday:
        - sun
        - mon
        - tue
        - wed
        - thu
      sequence:
      - service: input_datetime.set_datetime
        data:
          time: 07:15:00
        entity_id: input_datetime.febe_next_alarm
    - conditions:
      - condition: time
        weekday:
        - fri
        - sat
      sequence:
      - service: input_datetime.set_datetime
        data:
          time: 08:00:00
        entity_id: input_datetime.febe_next_alarm
    default: []
  mode: single
- id: shellies_announce
  alias: Shellies Announce
  trigger:
  - platform: homeassistant
    event: start
  - platform: time_pattern
    hours: /1
  action:
    service: mqtt.publish
    data:
      topic: shellies/command
      payload: announce
- id: shellies_discovery
  alias: Shellies Discovery
  mode: queued
  max: 999
  trigger:
    platform: mqtt
    topic: shellies/announce
  action:
    service: python_script.shellies_discovery
    data_template:
      id: '{{ trigger.payload_json.id }}'
      mac: '{{ trigger.payload_json.mac }}'
      fw_ver: '{{ trigger.payload_json.fw_ver }}'
      shelly1-8A7B0C:
        relay-0-name: Schakelaar Dressing
      shelly1-2C6E97:
        relay-0: light
        relay-0-name: Achterdeur
      shellydimmer-D0F117:
        light-0-name: Gang Eerste Verdiep
- id: '1598594585829'
  alias: Disable Motion Sensor Bureau
  description: ''
  trigger:
  - device_id: a23a7754f95b4a88ad347941e45bfd6b
    domain: deconz
    platform: device
    subtype: turn_on
    type: remote_button_short_press
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.disable_motion_trigger_light_bureau
    service: input_boolean.turn_on
  mode: single
- id: '1598594636282'
  alias: Enable Motion Sensor Bureau
  description: ''
  trigger:
  - device_id: a23a7754f95b4a88ad347941e45bfd6b
    domain: deconz
    platform: device
    subtype: turn_off
    type: remote_button_short_press
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.disable_motion_trigger_light_bureau
    service: input_boolean.turn_off
  mode: single
- id: '1600753998896'
  alias: 'Leaving: automatically turn off'
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.no_one_home
    to: 'on'
    for:
      minutes: 1
  condition:
  - condition: state
    entity_id:
    - input_boolean.guest_mode
    state: 'off'
  action:
  - service: script.leaving
- id: '1600753998897'
  alias: 'Leaving: start vacuum after 5 mins'
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.no_one_home
    to: 'on'
    for: 0:05:00
  condition:
  - condition: state
    entity_id:
    - input_boolean.guest_mode
    state: 'off'
  action:
  - service: script.vacuum_automated
  mode: single
- id: '1600754548159'
  alias: 'Leaving: set thermostat to ECO'
  description: Set thermostat to ECO after an hour
  trigger:
  - platform: state
    entity_id: binary_sensor.no_one_home
    to: 'on'
    for:
      minutes: 60
  condition:
  - condition: state
    entity_id:
    - input_boolean.guest_mode
    state: 'off'
  action:
  - service: script.set_thermostat_away
  mode: single
- id: '1600754448159'
  alias: Arriving
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.no_one_home
    to: 'off'
  condition: []
  action:
  - service: script.arriving
  mode: single
- id: '1600756948650'
  alias: Woonkamer Lights Morning On
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.motion_living
    to: 'on'
  condition:
  - condition: and
    conditions:
    - condition: time
      after: '6:00:00'
      before: '9:30:00'
    - condition: state
      entity_id: binary_sensor.no_one_home
      state: 'off'
    - condition: numeric_state
      entity_id: sensor.illuminance_living
      below: '3'
  action:
  - scene: scene.woonkamer_morning
  mode: single
- id: '1600757546616'
  alias: Woonkamer Lights Morning Off
  description: ''
  trigger:
  - platform: template
    value_template: '{{ states(''sensor.illuminance_living'') | float > 2 and (states(''sensor.time'')
      >= ''06:00:00'' and states(''sensor.time'') <= ''09:30:00'') }}'
  - platform: time
    at: 09:30:00
  - platform: state
    entity_id: binary_sensor.motion_living
    to: 'off'
    for: 00:30:00
    from: 'on'
  condition:
  - condition: time
    after: 06:00:00
    before: 09:30:00
  action:
  - scene: scene.woonkamer_off
  mode: single
- id: '1600758658063'
  alias: Woonkamer Lights Eve On
  description: ''
  trigger:
  - platform: time
    at: '16:00:00'
  - platform: state
    entity_id: binary_sensor.no_one_home
    to: 'off'
  - platform: template
    value_template: '{{ states(''sensor.illuminance_living'') | float < 5 and (states(''sensor.time'')
      >= ''16:00:00'' and states(''sensor.time'') <= ''19:00:00'') }}'
  condition:
  - condition: time
    after: '16:00:00'
    before: '19:00:00'
  - condition: state
    entity_id: binary_sensor.no_one_home
    state: 'off'
  - condition: numeric_state
    entity_id: sensor.illuminance_living
    below: '15'
  action:
  - scene: scene.woonkamer_eve
  mode: single
- id: '1600759062566'
  alias: Woonkamer Lights Evening On
  description: ''
  trigger:
  - platform: time
    at: '19:00:00'
  - platform: state
    entity_id: binary_sensor.no_one_home
    to: 'off'
  condition:
  - condition: time
    after: '19:00:00'
    before: '22:00:00'
  - condition: state
    entity_id: binary_sensor.no_one_home
    state: 'off'
  action:
  - scene: scene.woonkamer_evening
  mode: single
- id: '1600759267237'
  alias: Woonkamer Lights Night
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.motion_living
    to: 'on'
  condition:
  - condition: time
    after: '22:00:00'
    before: 06:00:00
  - condition: state
    entity_id: binary_sensor.no_one_home
    state: 'off'
  - condition: state
    entity_id: media_player.samsung_samsung_dtv_rcr
    state: 'off'
  action:
  - scene: scene.woonkamer_night
  - delay: 00:05:00
  - scene: scene.woonkamer_off
  mode: restart
- id: '1600759643151'
  alias: Woonkamer Lights Evening Off
  description: ''
  trigger:
  - platform: time
    at: '22:00:00'
  condition: []
  action:
  - choose:
    - conditions:
        condition: state
        entity_id: media_player.samsung_samsung_dtv_rcr
        state: 'on'
      sequence:
      - wait_for_trigger:
          platform: state
          entity_id: media_player.samsung_samsung_dtv_rcr
          for:
            minutes: 5
          to: 'off'
  - scene: scene.woonkamer_off
  mode: single
- id: '1600846307260'
  alias: Reset Daily Inputs
  description: ''
  trigger:
  - platform: time
    at: 00:00:00
  condition: []
  action:
  - service: input_boolean.turn_off
    entity_id: input_boolean.daily_vacuum_first_run
  mode: single
- id: '1600848151975'
  alias: 'Telegram: Vacuum Response'
  description: ''
  trigger:
  - platform: event
    event_type: telegram_callback
    event_data:
      command: /vacuumemptybindone
  - platform: event
    event_type: telegram_callback
    event_data:
      command: /vacuumemptybinextend
  condition: []
  action:
  - service: script.vacuum_bin_feedback
    data:
      callback_id: '{{ trigger.event.data.id }}'
      command: '{{ trigger.event.data[''command''].strip(''/'') }}'
  mode: single
- id: '1600848151075'
  alias: 'Telegram: Guest Mode Response'
  description: ''
  trigger:
  - platform: event
    event_type: telegram_callback
    event_data:
      command: /yesguest
  - platform: event
    event_type: telegram_callback
    event_data:
      command: /noguest
  condition: []
  action:
  - service: script.guest_mode_feedback
    data:
      callback_id: '{{ trigger.event.data.id }}'
      command: '{{ trigger.event.data[''command''].strip(''/'') }}'
  mode: single
- id: '1600850581196'
  alias: 'Vacuum: Select Room'
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.vacuum_room
    from: Selecteer Kamer
  condition: []
  action:
  - service: script.vacuum_zone
    data:
      zone: '{{ states(''input_select.vacuum_room'') }}'
  mode: single
- id: '1600861348101'
  alias: 'Security: motion detected indoor but we are not home'
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.voor_deur
    - binary_sensor.achter_deur
    - binary_sensor.keuken_deur
    - binary_sensor.garage_deur
    to: 'on'
  - platform: state
    entity_id:
    - binary_sensor.motion_wc_boven
    - binary_sensor.motion_wc_beneden
    - binary_sensor.motion_gang_eerste_2
    - binary_sensor.motion_gang_eerste_1
    - binary_sensor.motion_inkom_1
    - binary_sensor.motion_inkom_2
    - binary_sensor.motion_gang_zolder
    - binary_sensor.motion_dressing
    - binary_sensor.motion_speelkamer
    - binary_sensor.motion_living
    to: 'on'
  - platform: state
    entity_id: binary_sensor.zilverberkenstraat_7_away
    to: 'off'
  condition:
  - condition: state
    entity_id: binary_sensor.no_one_home
    state: 'on'
  - condition: state
    entity_id: vacuum.xiaomi_vacuum_cleaner
    state: docked
  action:
  - service: script.motion_detected
    data:
      sensor: '{{ trigger.entity_id }}'
  mode: single
- id: '1600868245749'
  alias: 'Climate: Enable ECO when doors are open'
  description: ''
  trigger:
  - platform: state
    entity_id: group.doordetection
    from: 'off'
    to: 'on'
    for: 00:10:00
  condition: []
  action:
  - service: climate.set_preset_mode
    data:
      preset_mode: eco
    entity_id: climate.downstairs
  mode: restart
- id: '1600868305287'
  alias: 'Climate: disable ECO when the doors are closed'
  description: ''
  trigger:
  - platform: state
    entity_id: group.doordetection
    from: 'on'
    to: 'off'
    for: 00:05:00
  condition: []
  action:
  - service: climate.set_preset_mode
    data:
      preset_mode: none
    entity_id: climate.downstairs
  mode: restart
- id: '1600870113700'
  alias: Active Guest Mode
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.guest_mode
    from: 'off'
    to: 'on'
  condition: []
  action:
  - service: script.activate_guest_mode
    data: {}
  mode: single
- id: '1600870370709'
  alias: Set Timed Temperature Based on Input
  description: ''
  trigger:
  - platform: time
    at: input_datetime.temperaturetime
  condition:
  - condition: state
    entity_id: input_boolean.tempsetactive
    state: 'on'
  action:
  - service: script.set_temperature
    data: {}
  mode: single
- id: '1600927539284'
  alias: 'Night Mode: Activate'
  description: ''
  trigger:
  - platform: time
    at: '21:30:00'
  - platform: state
    entity_id: binary_sensor.no_one_home
    to: 'off'
    for: 00:01:00
  condition:
  - condition: state
    entity_id: binary_sensor.no_one_home
    state: 'off'
  - condition: time
    after: '21:30:00'
    before: 07:00:00
  action:
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.night_mode
  mode: single
- id: '1600927587299'
  alias: 'Night Mode: Deactivate Weekday'
  description: ''
  trigger:
  - platform: time
    at: 07:00:00
  - platform: state
    entity_id: binary_sensor.no_one_home
    to: 'off'
    for: 00:01:00
  condition:
  - condition: state
    entity_id: binary_sensor.no_one_home
    state: 'off'
  - condition: time
    after: 07:00:00
    before: '21:30:00'
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  action:
  - service: script.deactivate_night_mode
    data: {}
  mode: single
- id: '1600928587299'
  alias: 'Notify: Bureau Led Door Opened'
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.voor_deur
    - binary_sensor.keuken_deur
    - binary_sensor.achter_deur
    - binary_sensor.garage_deur
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id:
    - binary_sensor.motion_detected_bureau_in_last_hour
    state: 'on'
  action:
  - service: scene.create
    data:
      scene_id: notify_led_bureau
      snapshot_entities:
      - light.desk_lamp
  - service: light.turn_on
    data:
      effect: police
      brightness_pct: 100
    entity_id: light.desk_lamp
  - delay:
      minutes: 1
  - scene: scene.notify_led_bureau
- id: '1600928588299'
  alias: 'Night Mode: Toggle'
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.night_mode
    for:
      minutes: 1
  condition: []
  action:
  - service: script.night_mode_turn_{{ trigger.to_state.state }}
- id: '1601324314469'
  alias: 'Night Mode: Deactivate Weekend'
  description: ''
  trigger:
  - platform: time
    at: 08:00:00
  - platform: state
    entity_id: binary_sensor.no_one_home
    to: 'off'
    for: 00:01:00
  condition:
  - condition: state
    entity_id: binary_sensor.no_one_home
    state: 'off'
  - condition: time
    after: 08:00:00
    before: '21:30:00'
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'off'
  action:
  - service: script.deactivate_night_mode
    data: {}
  mode: single
- id: '1602156764240'
  alias: Radio Beneden
  description: Radio aansteken, 's morgens (beweging), door de dag op presence
  trigger:
  - platform: state
    entity_id: binary_sensor.motion_living
    to: 'on'
  - platform: state
    entity_id: binary_sensor.no_one_home
    to: 'off'
  condition:
  - condition: and
    conditions:
    - condition: time
      after: '6:00'
      before: '18:00'
    - condition: state
      entity_id: media_player.beneden
      state: 'off'
    - condition: state
      entity_id: media_player.samsung_samsung_dtv_rcr
      state: 'off'
  action:
  - service: script.radio_beneden
    data: {}
  mode: single
- id: '1602686644196'
  alias: Vacuum Started Cleaning
  description: ''
  trigger:
  - platform: state
    entity_id: vacuum.xiaomi_vacuum_cleaner
    to: cleaning
    from: docked
  condition:
  - condition: state
    entity_id: input_select.vacuum_room
    state: Selecteer Kamer
  action:
  - service: script.vacuum_record_run
  - service: script.vacuum_notify
    data: {}
  mode: single
