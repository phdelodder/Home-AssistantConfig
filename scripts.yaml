set_temperature:
  alias: Set Temperature
  sequence:
  - service: climate.set_operation_mode
    data:
      entity_id: climate.downstairs
      operation_mode: heat
  - service: climate.set_temperature
    data_template:
      temperature: '{{ states.sensor.temperature_degrees.state | float }}'
  - service: notify.hazilverberkenstraatbot
    data_template:
      message: Temperature set to {{ states.sensor.temperature_degrees.state}}
  - service: input_boolean.turn_off
    data:
      entity_id: input_boolean.tempsetactive
set_nest_away:
  sequence:
  - data:
      preset_mode: 'away'
      entity_id: climate.downstairs
    service: climate.set_preset_mode
  - data_template:
      message: Nest has been set to away
    service: notify.hazilverberkenstraatbot
set_nest_home:
  sequence:
  - data:
      present_mode: 'none'
      entity_id: climate.downstairs
    service: climate.set_present_mode
  - data_template:
      message: Nest has been set to home
    service: notify.hazilverberkenstraatbot
nest_motion_detection:
  sequence:
  - service: camera.snapshot
    data_template:
      entity_id: camera.oprit
      filename: "/config/www/snapshots/camera.oprit.jpg"
  - service: notify.hazilverberkenstraatbot
    data_template: 
      message: "Nest has detected motion"
      data:
        photo:
          - file: "/config/www/snapshots/camera.oprit.jpg"
            caption: "Nest has detected motion"
start_up_home_assistant:
  alias: Start Up Home Assistant
  sequence:
  - service: shell_command.ha_start

activate_guest_mode:
  sequence:
  - service: input_boolean.turn_on
    data:
      entity_id: input_boolean.house_guests
  - service: notify.hazilverberkenstraatbot
    data_template:
      message: >
        Guest mode activated

deactivate_guest_mode:
  sequence:
  - service: input_boolean.turn_off
    data:
      entity_id: input_boolean.house_guests
  - service: notify.hazilverberkenstraatbot
    data_template:
      message: >
        Guest mode deactivated


notify_afval:
  alias: Notify Afval
  sequence:
  - service: notify.hazilverberkenstraatbot
    data_template:
      message: >
        {{ states('sensor.ophaalkalender_morgen') }} morgen buiten zetten!

outside_motion_detection:
  sequence:
  - service: camera.snapshot
    data_template:
      entity_id: camera.oprit
      filename: "/config/www/snapshots/camera.oprit.jpg"
  - service: notify.hazilverberkenstraatbot
    data_template: 
      message: "Buiten beweging gedetecteerd, {{ sensor }}"
      data:
        photo:
          - file: "/config/www/snapshots/camera.oprit.jpg"
            caption: "Buiten beweging gedetecteerd, {{ sensor }}"

vacuum_keuken:
  alias: "Vacuum Keuken"
  sequence:
  - service: vacuum.send_command
    data:
      entity_id: vacuum.xiaomi_vacuum_cleaner
      command: app_zoned_clean
      params: [[23386,23366,25286,28216,1]]
vacuum_eet_kamer:
  alias: "Vacuum Eet Kamer"
  sequence:
  - service: vacuum.send_command
    data:
      entity_id: vacuum.xiaomi_vacuum_cleaner
      command: app_zoned_clean
      params: [[25244,21493,30594,26593,1]]
vacuum_living:
  alias: "Vacuum Living"
  sequence:
  - service: vacuum.send_command
    data:
      entity_id: vacuum.xiaomi_vacuum_cleaner
      command: app_zoned_clean
      params: [[24260,16982,30710,21882,1]]
vacuum_inkom:
  alias: "Vacuum Inkom"
  sequence:
  - service: vacuum.send_command
    data:
      entity_id: vacuum.xiaomi_vacuum_cleaner
      command: app_zoned_clean
      params: [[23110,14614,25410,18664,1]]
vacuum_berging:
  alias: "Vacuum Berging"
  sequence:
  - service: vacuum.send_command
    data:
      entity_id: vacuum.xiaomi_vacuum_cleaner
      command: app_zoned_clean
      params: [[23508,21814,25408,23314,1]]
vacuum_is_done:
  sequence:
  - data_template:
      message: "Stofzuiger is klaar"
    service: notify.hazilverberkenstraatbot
vacuum_is_done_room:
  sequence:
  - data_template:
      message: "Stofzuiger is klaar met {{room}}"
    service: notify.hazilverberkenstraatbot
low_battery_notification:
  sequence: 
  - service: persistent_notification.create 
    data_template:
      title: "Low Battery Device"
      message: "{{name}} has only {{battery}}% left!"
      notification_id: "lowbatterydevice{{entity_id}}"
dismiss_low_battery_notification:
  sequence: 
  - service: persistent_notification.dismiss
    data_template:
      notification_id: "lowbatterydevice{{entity_id}}"
